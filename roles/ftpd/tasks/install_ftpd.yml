---
     - name: installation or check that ftpd installed and latest
       yum:
         name: vsftpd
         state: latest
     
     - name: enable_service_ftpd_on_firewall
       firewalld:
         service: ftp
         state: enabled
         permanent: true
      
     - name: change_ftpd_config_via_j2template
       template:
         src: vsftpd.conf.j2
         dest: /etc/vsftpd/vsftpd.conf

     - name: service ftpd start
       service:
        name: vsftpd
        enabled: yes
        state: started

     - name: SE context
       sefcontext:
        target: '/var/ftp/pub(/.*)?'
        setype: public_content_rw_t
        state: present

     - name: set ftpd ftpd_anon_write boolean on
       seboolean:
         name: ftpd_anon_write
         state: yes
         persistent: yes

     - name: Apply new SELinux file context to filesystem
       command: restorecon -irv /var/ftp/pub